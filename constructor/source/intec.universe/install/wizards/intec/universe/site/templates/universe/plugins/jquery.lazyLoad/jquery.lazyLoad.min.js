!function(t){var e,i;(e={}).events=["scroll","resize","orientationchange"],e.initialize=function(i,s){this.node=i,this.options={},this.images=null,this.observer=null,this.handler=t.proxy(e.run,this),this.interval=null,this.busy={used:!1,delayed:!1},e.configure.call(this,t.extend({autoRunUse:!0,autoRunInterval:500,busyUse:!0,busyTimeout:500,enableAttributeName:"data-lazyload-use",sourceAttributeName:"data-lazyload-src",sourceSetAttributeName:"data-lazyload-srcset"},s)),t.isFunction(MutationObserver)&&((i=this.node)||(i=t("html").get(0)),i&&(this.observer=new MutationObserver(t.proxy(e.bind,this)),this.observer.observe(i,{childList:!0,subtree:!0})))},e.bind=function(){this.node?this.images=t("["+this.options.enableAttributeName+'="true"]',this.node):this.images=t("["+this.options.enableAttributeName+'="true"]'),this.images.length>0&&(t(window).off(e.events.join(" "),this.handler),t(window).on(e.events.join(" "),this.handler))},e.reload=function(){e.bind.call(this),e.run.call(this)},e.configure=function(i){this.options=t.extend(this.options,i),this.interval&&(clearInterval(this.interval),this.interval=null),this.options.autoRunUse&&(this.interval=setInterval(this.handler,this.options.autoRunInterval)),e.reload.call(this)},e.run=function(){var i=this;0!==i.images.length&&(i.options.busyUse&&i.busy.used?i.busy.delayed=!0:(i.busy.used=!0,setTimeout(function(){i.images.each(function(){var e=this,s=t.isFunction(getComputedStyle)?getComputedStyle(e):e.currentStyle;if(s&&"visible"===s.visibility&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)){var n=e.getBoundingClientRect();if(n.top<=window.innerHeight&&n.bottom>=0){var o=e.getAttribute(i.options.sourceAttributeName),r=e.getAttribute(i.options.sourceSetAttributeName);"IMG"===e.tagName?(o&&(e.src=o),r&&(e.srcset=r)):o&&(e.style.backgroundImage="url('"+o+"')"),e.removeAttribute(i.options.enableAttributeName),e.removeAttribute(i.options.sourceAttributeName),e.removeAttribute(i.options.sourceSetAttributeName),i.images=i.images.filter(function(t,i){return i!==e})}}}),0===i.images.length&&t(window).off(e.events.join(" "),i.handler),i.busy.used=!1,i.busy.delayed&&(i.busy.delayed=!1,e.run.call(i))},i.options.busyTimeout)))},e.destroy=function(){this.node=null,this.options={},this.images=null,t(window).off(e.events.join(" "),this.handler),this.interval&&clearInterval(this.interval),this.observer&&(this.observer.disconnect(),this.observer=null)},i=function(i,s){var n={};e.initialize.call(n,i,s),this.run=t.proxy(e.run,n),this.reload=t.proxy(e.reload,n),this.destroy=t.proxy(e.destroy,n)},t.lazyLoad=function(t){return new i(null,t)},t.fn.extend({lazyLoad:function(e){return this.each(function(){this.lazyLoader instanceof i?t.isPlainObject(e)?this.lazyLoader.configure(e):"run"===e?this.lazyLoader.run():"reload"===e?this.lazyLoader.reload():"destroy"===e&&(this.lazyLoader.destroy(),this.lazyLoader=void 0):(void 0===e||t.isPlainObject(e))&&(this.lazyLoader=new i(this,e))}),this}})}(jQuery);